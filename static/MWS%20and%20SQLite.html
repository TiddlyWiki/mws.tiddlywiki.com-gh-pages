<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.3.7-prerelease" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>MWS and SQLite: TiddlyWiki MultiWikiServer â€” TiddlyWiki for the People</title>
</head>
<body class="tc-body">
<p><div class="tc-static-alert"><div class="tc-static-alert-inner">This page is part of a static HTML representation of the TiddlyWiki at <a class="tc-tiddlylink-external" href="https://tiddlywiki.com/" rel="noopener noreferrer" target="_blank">https://tiddlywiki.com/</a></div></div>
</p>
<section class="tc-story-river tc-static-story-river">
<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists  tc-tagged-Architecture" data-tags="Architecture" data-tiddler-title="MWS and SQLite" role="article"><div class="tc-tiddler-title tc-clearfix"><div class="tc-titlebar"><span class="tc-tiddler-controls"><button aria-expanded="false" aria-label="more" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fmore-tiddler-actions" title="More actions"></button><span class=" tc-reveal" hidden="true"></span><button aria-label="Edit this tiddler" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fedit" title="Edit this tiddler"></button><button aria-label="close" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose" title="Close this tiddler"></button></span><span><h2 class="tc-title">MWS and SQLite</h2></span></div><div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div></div><div class="tc-reveal"></div><div class=" tc-reveal"><div class="tc-subtitle tc-clearfix"></div></div><div class=" tc-reveal"><div class="tc-tags-wrapper"><span class="tc-tag-list-item" data-tag-title="Architecture"><span aria-expanded="false" class="tc-tag-label tc-btn-invisible" draggable="true" style="fill:#333333;color:#333333;"><span class="tc-tag-exists">Architecture</span></span><span class="tc-drop-down tc-reveal" hidden="true"></span></span></div></div><div class="tc-tiddler-body tc-clearfix tc-reveal"><h1 class="">Introduction</h1><p>SQLite is a very popular open source embedded SQL database with some <a class="tc-tiddlylink-external" href="https://www.sqlite.org/different.html" rel="noopener noreferrer" target="_blank">unusual characteristics</a>. It has proved itself to be robust, fast and scalable, and has been widely adopted in a range of applications including web browsers, mobile devices, and embedded systems.</p><p>The "embedded" part means that developers access SQLite as a library of C functions that run as part of a larger application. This contrasts with more familiar database applications like Microsoft's SQL Server or Oracle that are accessed as network services.</p><p>MWS uses SQLite for the tiddler store and associated data. It brings many advantages:</p><ul><li><strong>Performance</strong>: the optimising query engine inside SQLite makes it much faster and more efficient than could be achieved in plain JavaScript. In some cases, it is <a class="tc-tiddlylink tc-tiddlylink-missing" href="%257Chttps%253A%252F%252Fwww.sqlite.org%252Ffasterthanfs.html.html">faster than writing directly to the file system</a></li><li><strong>Reliability</strong>: SQLite uses protocols that <a class="tc-tiddlylink-external" href="https://www.sqlite.org/hirely.html" rel="noopener noreferrer" target="_blank">ensure data integrity and consistency</a>, even when the application crashes</li><li><strong>Scalability</strong>: SQLite can handle extremely <a class="tc-tiddlylink-external" href="https://www.sqlite.org/limits.html" rel="noopener noreferrer" target="_blank">large datasets and complex queries</a></li><li><strong>Portability</strong>: SQLite databases are stored as <a class="tc-tiddlylink-external" href="https://www.sqlite.org/fileformat.html" rel="noopener noreferrer" target="_blank">a single file</a> that can be easily copied and moved between systems</li></ul><h1 class="">Misconceptions</h1><p>TiddlyWiki 5 has always incorporated a database. Until MWS, that database has always been a custom tiddler database written in JavaScript. Over the years it has been enhanced and optimised with indexes and other database features that have given us reasonably decent performance for a range of common operations.</p><p>In terms of the traditional architecture of TiddlyWiki, MWS uses SQLite as the basis for an internal API that is equivalent to that of the <code>$tw.Wiki</code> object: basic CRUD operations on a database of tiddlers stored by their titles.</p><p>In the context of MWS, SQLite is just a fast and efficient equivalent of TiddlyWiki's existing JavaScript database engine. It gives us the option of persisting the database in file storage, but we also retain the option to run the database entirely within memory and rely on a file synchronisation process to save changes as individual <code>.tid</code> files in the file system, just as we do today.</p><p>One particular misconception to avoid is the idea that SQLite replaces the folders of <code>.tid</code> files that characterise the Node.js configuration of TiddlyWiki. These are separate components with a different purpose. The tiddler files are the result of syncing a database to the filesystem, and that database can be conceptually interchanged between our custom JavaScript database or the new SQLite implementation in MWS.
</p></div>
</div></p>
</section>
</body>
</html>

